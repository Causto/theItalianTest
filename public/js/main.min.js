/*! test - v1.0.0 - 2015-05-14-18-41 */
function el(element){return document.querySelector(element)}function messageToCLient(parent,parentClass,message,childClass){el(".tempDialog")?el(".tempDialog").parentNode.removeChild(el(".tempDialog")):element=document.createElement("div"),element.className=" tempDialog ",element.className+=childClass,parent.appendChild(element),parent.classList.add(parentClass),element.innerHTML=message}function pasteString(e){e.preventDefault()}function checkingCardNumber(field){var val=field.value,_firstnumber=val.charAt(0),_secondNumber=val.charAt(1);return _buttonName=el(".input-group-addon"),_visa="visa",_mastercard="Master Card",_americanExp="American Express",4==_firstnumber&&16==val.length?(_buttonName.classList.add("valid"),_buttonName.innerHTML=_visa,cvvValue=0):5==_firstnumber&&16==val.length?(_buttonName.classList.add("valid"),_buttonName.innerHTML=_mastercard,cvvValue=0):3!=_firstnumber||4!=_secondNumber&&7!=_secondNumber||15!=val.length?(_buttonName.classList.remove("valid"),_buttonName.innerHTML="what a card ?"):(_buttonName.classList.add("valid"),_buttonName.innerHTML=_americanExp,cvvValue=1),cvvValue}function isValidDate(){var now=new Date,month=now.getMonth()+1,year=now.getFullYear(),limitYear=now.getFullYear()+4;month=month.toString(),year=year.toString().substring(2,4),limitYear=limitYear.toString().substring(2,4);var _dateValue=dateCard.value.replace(/\s/g,""),_cardValidity=_dateValue.split(/\D/),_cardMonth=parseInt(_cardValidity[0]),_cardYear=_cardValidity[1],parent=dateCard.parentElement,parentClass="addtext";if(dateCard.value=_dateValue,""==_cardValidity[0])console.log("mmh");else if(2!=_cardValidity.length||_cardMonth>12||year>_cardYear||month>_cardMonth&&_cardYear==year||_cardYear>limitYear){var message="Write the date as on your card please",childClass="errorMessage";dateCard.classList.add("redBorder"),messageToCLient(parent,parentClass,message,childClass)}else{var message="Seems Good dawg",childClass="wellDoneMessage";dateCard.classList.add("greenBorder"),messageToCLient(parent,parentClass,message,childClass)}}function checkingOnSubmit(e){e.preventDefault(),isCardNumberValid(),isValidDate(),isEmpty(inputs)}for(var cardNumInput=el(".card"),inputs=document.querySelectorAll(".form-control"),cvvInput=el(".cvv"),dateCard=el(".dateClientCard"),cvvValue,element,deleteNaN=function(field){var fieldValue=field.value,_notANumber=isNaN(fieldValue);_notANumber&&(fieldValue=fieldValue.substring(0,fieldValue.length-1)),field.value=fieldValue},isCardNumberValid=function(cardNu){var validateCC=function(arr){return function(ccNum){for(var val,len=ccNum.length,bit=1,sum=0;len;)val=parseInt(ccNum.charAt(--len),10),sum+=(bit^=1)?arr[val]:val;return sum&&sum%10===0}}([0,2,4,6,8,1,3,5,7,9]);return validateCC(cardNu)},checkingCVV=function(cardNu){var _cvvControl;if(_cvvControl=cardNu.value?!0:!1,!_cvvControl)return void console.log("you should enter a card number first");deleteNaN(cvvInput);var _cardNuVal=checkingCardNumber(cardNu);0==_cardNuVal?(console.log(this),4==cvvInput.length?console.log("visa"):5==cvvInput.legnth&&console.log("cool")):console.log(1==_cardNuVal&&4==cvvInput.length?"amercian Express":"nope")},isEmpty=function(fields){for(var i=0;i<fields.length;i++)fields[i].classList.contains("redBorder")&&fields[i].classList.remove("redBorder"),""==fields[i].value&&fields[i].classList.add("redBorder")},allInputs=document.querySelectorAll("input"),i=0;i<allInputs.length;i++)allInputs[i].addEventListener("paste",pasteString,!1);cardNumInput.addEventListener("keyup",function(){deleteNaN(this),checkingCardNumber(this)},!1),cvvInput.addEventListener("keyup",function(){checkingCVV(cardNumInput)},!1),el(".btn").addEventListener("click",checkingOnSubmit,!1);
//# sourceMappingURL=main.min.js.map