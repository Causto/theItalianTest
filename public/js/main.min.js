/*! test - v1.0.0 - 2015-06-12-14-13 */
for(var response=response||{},allInputs=document.querySelectorAll("input"),el=function(element){return document.querySelector(element)},getValue=function(input){var _val=input.value;return _val},messageToCLient=function(parent,parentClass,message,childClass){el(".tempDialog")?el(".tempDialog").parentNode.removeChild(el(".tempDialog")):element=document.createElement("div"),element.className=" tempDialog ",element.className+=childClass,parent.appendChild(element),parent.classList.add(parentClass),element.innerHTML=message},pasteString=function(e){e.preventDefault()},deleteNaN=function(field){var _fieldValue=getValue(field),_notANumber=isNaN(_fieldValue);_notANumber&&(_fieldValue=_fieldValue.substring(0,_fieldValue.length-1)),field.value=_fieldValue},cardType=function(input){var _cardType,_cvvType,_cardVal=getValue(input),_firstnumber=_cardVal.charAt(0),_secondNumber=_cardVal.charAt(1);4==_firstnumber&&16==_cardVal.length?(_cardType="Visa",_cvvType="0"):5==_firstnumber&&16==_cardVal.length?(_cardType="Mastercard",_cvvType="0"):3!=_firstnumber||4!=_secondNumber&&7!=_secondNumber||15!=_cardVal.length?(_cardType="?",_cvvType=""):(_cardType="American Express",_cvvType="1"),response.cardType=_cardType,response.cvvType=_cvvType,response.card=response.cardType.length>0?_cardVal:""},printCardType=function(resultCardType){var _buttonName=el(".input-group-addon");_buttonName.innerHTML=response.cardType?response.cardType:"?"},isCardNumberValid=function(cardNu){var validateCC=function(arr){return function(ccNum){for(var val,len=ccNum.length,bit=1,sum=0;len;)val=parseInt(ccNum.charAt(--len),10),sum+=(bit^=1)?arr[val]:val;return sum&&sum%10===0}}([0,2,4,6,8,1,3,5,7,9]);return validateCC(cardNu)},isValidDate=function(dateInput){var now=new Date,month=now.getMonth()+1,year=now.getFullYear(),limitYear=now.getFullYear()+4;month=month.toString(),year=year.toString().substring(2,4),limitYear=limitYear.toString().substring(2,4);var _dateValue=getValue(dateInput).replace(/\s/gi,""),_cardValidity=_dateValue.split(/\D/),_cardMonth=parseInt(_cardValidity[0]),_cardYear=_cardValidity[1];2!=_cardValidity.length||_cardMonth>12||year>_cardYear||month>_cardMonth&&_cardYear==year||_cardYear>limitYear?response.date="":response.date=_dateValue},isValidCvv=function(input){var _val=getValue(input);switch(response.cvvType){case"0":response.cvv=3==_val.length?_val:"";break;case"1":response.cvv=4==_val.length?_val:"";break;default:return response.cvv="",!1}},isPossibleName=function(input){var _regex=/^[a-zA-ZÀ-ÿ\s]+$/,_val=getValue(input);_regex.test(_val)?(_val=_val.toUpperCase(),_val=_val.split(/\s/g),response.name=_val):response.name=""},isEmpty=function(field,val){val?field.classList.contains("true")||(field.classList.remove("error"),field.classList.add("true")):field.classList.contains("error")||(field.classList.remove("true"),field.classList.add("error"))},checkingOnSubmit=function(e){var _val=!1;e.preventDefault();for(var i=0;i<allInputs.length;i++){var _i=allInputs[i];(""==_i.value||null==_i.value)&&(_val=!1,isEmpty(_i,_val))}for(var prop in response){var _el=el("."+prop);_el&&(response[prop]?(_val=!0,isEmpty(_el,_val)):(_val=!1,isEmpty(_el,_val)))}},i=0;i<allInputs.length;i++){var _i=allInputs[i];_i.addEventListener("paste",pasteString,!1),_i.addEventListener("keyup",function(){if(this.classList.contains("card")||this.classList.contains("cvv"))if(deleteNaN(this),this.classList.contains("card")){{cardType(this)}printCardType(response.card),response.card.length>0&&(isCardNumberValid(response.card)?response.card=response.card:response.card="")}else isValidCvv(this);this.classList.contains("name")&&isPossibleName(this),this.classList.contains("date")&&isValidDate(this)},!1)}el(".form").addEventListener("submit",checkingOnSubmit,!1);
//# sourceMappingURL=main.min.js.map