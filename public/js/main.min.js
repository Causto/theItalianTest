/*! test - v1.0.0 - 2015-06-03-16-03 */
function el(element){return document.querySelector(element)}for(var cardNumInput=el(".card"),inputs=document.querySelectorAll(".form-control"),cvvInput=el(".cvv"),dateCard=el(".dateClientCard"),response=response||{},getValue=function(input){var _val=input.value;return _val},messageToCLient=function(parent,parentClass,message,childClass){el(".tempDialog")?el(".tempDialog").parentNode.removeChild(el(".tempDialog")):element=document.createElement("div"),element.className=" tempDialog ",element.className+=childClass,parent.appendChild(element),parent.classList.add(parentClass),element.innerHTML=message},pasteString=function(e){e.preventDefault()},deleteNaN=function(field){var _fieldValue=getValue(field),_notANumber=isNaN(_fieldValue);_notANumber&&(_fieldValue=_fieldValue.substring(0,_fieldValue.length-1)),field.value=_fieldValue},cardType=function(input){var _cardType,_cvvType,_cardVal=getValue(input),_firstnumber=_cardVal.charAt(0),_secondNumber=_cardVal.charAt(1);4==_firstnumber&&16==_cardVal.length?(_cardType="Visa",_cvvType=0):5==_firstnumber&&16==_cardVal.length?(_cardType="Mastercard",_cvvType=0):3!=_firstnumber||4!=_secondNumber&&7!=_secondNumber||15!=_cardVal.length?(_cardType="",_cvvType=""):(_cardType="American Express",_cvvType=1),response.card=_cardType,response.cvvType=_cvvType,response.card.length>0?response.cardNumber=_cardVal:response.cardNumber=""},printCardType=function(resultCardType){var _buttonName=el(".input-group-addon");resultCardType?(_buttonName.classList.add("valid"),_buttonName.innerHTML=resultCardType):(_buttonName.classList.remove("valid"),_buttonName.innerHTML="")},isCardNumberValid=function(cardNu){var validateCC=function(arr){return function(ccNum){for(var val,len=ccNum.length,bit=1,sum=0;len;)val=parseInt(ccNum.charAt(--len),10),sum+=(bit^=1)?arr[val]:val;return sum&&sum%10===0}}([0,2,4,6,8,1,3,5,7,9]);return validateCC(cardNu)},isValidDate=function(dateInput){var now=new Date,month=now.getMonth()+1,year=now.getFullYear(),limitYear=now.getFullYear()+4;month=month.toString(),year=year.toString().substring(2,4),limitYear=limitYear.toString().substring(2,4);var _dateValue=getValue(dateInput).replace(/\s/gi,""),_cardValidity=_dateValue.split(/\D/),_cardMonth=parseInt(_cardValidity[0]),_cardYear=_cardValidity[1];2!=_cardValidity.length||_cardMonth>12||year>_cardYear||month>_cardMonth&&_cardYear==year||_cardYear>limitYear?response.date="":response.date=_dateValue},isValidCvv=function(input){switch(_fieldValue=getValue(input),cvvValue){case 0:3==_fieldValue.length?response.cvvValue=_fieldValue:response.cvvValue="";break;case 1:4==_fieldValue.length?response.cvvValue=_fieldValue:response.cvvValue="";break;default:return!1}},isPossibleName=function(input){var _regex=/D/gi,_val=getValue(input);return console.log(_val),_regex.test(input)?!0:!1},isEmpty=function(fields){for(var i=0;i<fields.length;i++)fields[i].classList.contains("redBorder")&&fields[i].classList.remove("redBorder"),""==fields[i].value&&fields[i].classList.add("redBorder")},checkingOnSubmit=function(e){e.preventDefault(),console.log(isPossibleName(el(".name")))},allInputs=document.querySelectorAll("input"),i=0;i<allInputs.length;i++)allInputs[i].addEventListener("paste",pasteString,!1);cardNumInput.addEventListener("keyup",function(){deleteNaN(this);cardType(this);printCardType(response.card)},!1),cvvInput.addEventListener("keyup",function(){deleteNaN(cvvInput),isValidCvv(this)},!1),el(".btn").addEventListener("click",checkingOnSubmit,!1);
//# sourceMappingURL=main.min.js.map